# Test Network Infrastructure Configuration (fa-IR)

آزمایش پیکربندی زیرساخت شبکه (فارسی)

|شناسه          |
|------------|
|WSTG-CONF-01|

## خلاصه

پیچیدگی ذاتی زیرساخت سرور وب به هم پیوسته و ناهمگن، که می تواند صدها برنامه وب را شامل شود، مدیریت پیکربندی و بررسی را به مرحله ای اساسی در آزمایش و استقرار هر برنامه تبدیل می کند. تنها به یک آسیب‌پذیری نیاز است تا امنیت کل زیرساخت را تضعیف کند، و حتی مشکلات کوچک و به ظاهر بی‌اهمیت ممکن است برای برنامه دیگری در همان سرور به خطرات جدی تبدیل شوند. برای رسیدگی به این مشکلات، پس از نقشه برداری از کل معماری، بررسی عمیق پیکربندی و مسائل امنیتی شناخته شده از اهمیت بالایی برخوردار است.

مدیریت پیکربندی صحیح زیرساخت وب سرور به منظور حفظ امنیت خود برنامه بسیار مهم است. اگر عناصری مانند نرم افزار وب سرور، سرورهای پایگاه داده پشتیبان یا سرورهای احراز هویت به درستی بررسی و ایمن نشوند، ممکن است خطرات ناخواسته ای را معرفی کنند یا آسیب پذیری های جدیدی را معرفی کنند که ممکن است خود برنامه را به خطر بیندازند.

به عنوان مثال، یک آسیب پذیری وب سرور که به مهاجم راه دور اجازه می دهد تا کد منبع برنامه خود را فاش کند (آسیب پذیری که چندین بار در سرورهای وب یا سرورهای برنامه ایجاد شده است) می تواند برنامه را در معرض خطر قرار دهد، همانطور که کاربران ناشناس می توانند از آن استفاده کنند. اطلاعات افشا شده در کد منبع برای اهرم حملات علیه برنامه یا کاربران آن.

برای آزمایش زیرساخت مدیریت پیکربندی باید مراحل زیر انجام شود:

- عناصر مختلفی که زیرساخت را تشکیل می دهند باید تعیین شوند تا بفهمیم چگونه با یک برنامه وب تعامل دارند و چگونه بر امنیت آن تأثیر می گذارند.
- تمام عناصر زیرساخت باید بازنگری شوند تا مطمئن شویم که هیچ آسیب پذیری شناخته شده ای ندارند.
- ابزارهای اداری مورد استفاده برای حفظ همه عناصر مختلف باید بررسی شود.
- سیستم‌های احراز هویت باید مورد بازبینی قرار گیرند تا اطمینان حاصل شود که نیازهای برنامه را برآورده می‌کنند و نمی‌توانند توسط کاربران خارجی برای افزایش دسترسی دستکاری شوند.
- فهرستی از پورت های تعریف شده که برای برنامه مورد نیاز است باید حفظ شود و تحت کنترل تغییر نگه داشته شود.

پس از نگاشت عناصر مختلفی که زیرساخت را تشکیل می‌دهند (به [Map Network and Application Architecture](../01-Information_Gathering/10-Map_Application_Architecture.md) مراجعه کنید)، می‌توان پیکربندی هر عنصر ایجاد شده را بررسی کرد و آسیب‌پذیری‌های شناخته شده را آزمایش کرد.

## اهداف آزمایش

- تنظیمات برنامه ها را که در سراسر شبکه تنظیم شده اند مرور کنید و آسیب پذیر نبودن آنها را تأیید کنید.
- تأیید کنید که چارچوب‌ها و سیستم‌های مورد استفاده امن هستند و به دلیل نرم‌افزار نگهداری‌نشده یا تنظیمات و اعتبارنامه‌های پیش‌فرض در معرض آسیب‌پذیری‌های شناخته‌شده نیستند.

## چگونه آزمایش کنیم

### آسیب پذیری های شناخته شده سرور (Known Server Vulnerabilities)

آسیب‌پذیری‌هایی که در بخش‌های مختلف معماری برنامه یافت می‌شوند، چه در سرور وب یا در پایگاه داده پشتیبان، می‌توانند به شدت خود برنامه را به خطر بیندازند. به عنوان مثال، یک آسیب پذیری سرور را در نظر بگیرید که به کاربر راه دور و احراز هویت نشده اجازه می دهد فایل ها را در وب سرور آپلود کند یا حتی فایل ها را جایگزین کند. این آسیب‌پذیری می‌تواند برنامه را به خطر بیندازد، زیرا یک کاربر سرکش ممکن است بتواند خود برنامه را جایگزین کند یا کدی را معرفی کند که بر سرورهای بک‌اند تأثیر بگذارد، زیرا کد برنامه آن مانند هر برنامه دیگری اجرا می‌شود.

بررسی آسیب‌پذیری‌های سرور در صورتی که نیاز باشد آزمایش از طریق آزمایش نفوذ کور انجام شود، ممکن است سخت باشد. در این موارد، آسیب‌پذیری‌ها باید از یک سایت راه دور، معمولاً با استفاده از یک ابزار خودکار، آزمایش شوند. با این حال، آزمایش برخی آسیب‌پذیری‌ها می‌تواند نتایج غیرقابل‌پیش‌بینی روی سرور وب داشته باشد، و آزمایش برای برخی دیگر (مانند مواردی که مستقیماً در حملات انکار سرویس دخالت دارند) ممکن است به دلیل خرابی سرویس در صورت موفقیت‌آمیز بودن آزمایش امکان‌پذیر نباشد.

برخی از ابزارهای خودکار، آسیب‌پذیری‌ها را بر اساس نسخه وب سرور بازیابی شده علامت‌گذاری می‌کنند. این منجر به مثبت کاذب و منفی کاذب می شود. از یک طرف، اگر نسخه وب سرور توسط مدیر سایت محلی حذف یا مبهم شده باشد، ابزار اسکن سرور را به عنوان آسیب پذیر نشان نمی دهد، حتی اگر آسیب پذیر باشد. از سوی دیگر، اگر فروشنده ارائه‌دهنده نرم‌افزار، نسخه وب سرور را هنگام رفع آسیب‌پذیری‌ها به‌روزرسانی نکند، ابزار اسکن آسیب‌پذیری‌هایی را که وجود ندارند پرچم‌گذاری می‌کند. مورد دوم در واقع بسیار رایج است زیرا برخی از فروشندگان سیستم عامل وصله‌های پورت (port patches) آسیب‌پذیری‌های امنیتی را به نرم‌افزاری که در سیستم عامل ارائه می‌کنند برمی‌گردانند، اما آپلود کامل را در آخرین نسخه نرم‌افزار انجام نمی‌دهند. این در اکثر توزیع‌های گنو/لینوکس (GNU/Linux) مانند دبیان (Debian)، رد هت (Red Hat) یا SuSE اتفاق می‌افتد. در بیشتر موارد، اسکن آسیب پذیری یک معماری برنامه، تنها آسیب پذیری های مرتبط با عناصر "در معرض" معماری (مانند وب سرور) را پیدا می کند و معمولاً نمی تواند آسیب پذیری های مرتبط با عناصری را که مستقیماً در معرض نمایش نیستند، پیدا کند، مانند بک اند احراز هویت، پایگاه داده پشتیبان یا پروکسی های معکوس [1] در حال استفاده.

در نهایت، همه فروشندگان نرم‌افزار آسیب‌پذیری‌ها را به صورت عمومی افشا نمی‌کنند، و بنابراین این ضعف‌ها در پایگاه‌های اطلاعاتی آسیب‌پذیری شناخته‌شده عمومی ثبت نمی‌شوند [2]. این اطلاعات فقط برای مشتریان افشا می شود یا از طریق اصلاحاتی منتشر می شود که توصیه های همراهی ندارند. این کار مفید بودن ابزارهای اسکن آسیب پذیری را کاهش می دهد. به طور معمول، پوشش آسیب‌پذیری این ابزارها برای محصولات رایج (مانند وب سرور آپاچی (Apache web server)، سرور اطلاعات اینترنتی مایکروسافت (Microsoft's Internet Information Server)، یا لوتوس دومینو آی‌بی‌ام (IBM's Lotus Domino)) بسیار خوب خواهد بود، اما برای محصولات کمتر شناخته‌شده وجود ندارد.

به همین دلیل است که بررسی آسیب‌پذیری‌ها زمانی بهتر انجام می‌شود که آزمایش کننده اطلاعات داخلی نرم‌افزار مورد استفاده، از جمله نسخه‌ها و نسخه‌های استفاده‌شده و وصله (patch) های اعمال‌شده روی نرم‌افزار را در اختیار آزمایش‌کننده قرار دهد. با استفاده از این اطلاعات، آزمایش کننده می‌تواند اطلاعات را از خود فروشنده بازیابی کند و تجزیه و تحلیل کند که چه آسیب‌پذیری‌هایی ممکن است در معماری وجود داشته باشد و چگونه می‌تواند بر خود برنامه تأثیر بگذارد. در صورت امکان، این آسیب‌پذیری‌ها را می‌توان برای تعیین اثرات واقعی آن‌ها و شناسایی عناصر خارجی (مانند سیستم‌های تشخیص نفوذ یا پیشگیری) که ممکن است احتمال بهره‌برداری موفقیت‌آمیز را کاهش یا نفی کند، آزمایش کرد. حتی ممکن است آزمایش‌کنندگان از طریق بررسی پیکربندی تشخیص دهند که این آسیب‌پذیری حتی وجود ندارد، زیرا بر یک مؤلفه نرم‌افزاری که استفاده نمی‌شود تأثیر می‌گذارد.

همچنین شایان ذکر است که فروشندگان گاهی اوقات آسیب‌پذیری‌ها را بی‌صدا رفع می‌کنند و با نسخه‌های نرم‌افزار جدید، رفع‌ها را در دسترس قرار می‌دهند. فروشندگان مختلف چرخه‌های انتشار متفاوتی خواهند داشت که حمایتی را که ممکن است برای نسخه‌های قدیمی‌تر ارائه کنند، تعیین می‌کند. یک آزمایش‌کننده با اطلاعات دقیق از نسخه‌های نرم‌افزاری که توسط معماری استفاده می‌شود، می‌تواند خطر مرتبط با استفاده از نسخه‌های نرم‌افزار قدیمی را که ممکن است در کوتاه‌مدت پشتیبانی نمی‌شوند یا اکنون پشتیبانی نمی‌شوند، تجزیه و تحلیل کند. این بسیار مهم است، زیرا اگر آسیب‌پذیری در یک نسخه نرم‌افزار قدیمی که دیگر پشتیبانی نمی‌شود ظاهر شود، ممکن است پرسنل سیستم مستقیماً از آن آگاه نباشند. هیچ وصله ای برای آن در دسترس نخواهد بود و توصیه ها ممکن است آن نسخه را به عنوان آسیب پذیر فهرست نکنند زیرا دیگر پشتیبانی نمی شود. حتی در صورتی که از وجود آسیب‌پذیری و آسیب‌پذیر بودن سیستم آگاه باشند،  باید یک نسخه جدید نرم‌افزاری را به‌روزرسانی کامل انجام دهند، که  ممکن است باعث خرابی قابل توجهی در معماری برنامه شود یا به دلیل ناسازگاری با آخرین نسخه نرم افزار ممکن است برنامه را مجبور به کدگذاری مجدد کند.

### ابزارهای مدیریتی (Administrative Tools)

هر زیرساخت وب سرور نیاز به وجود ابزارهای مدیریتی برای نگهداری و بروزرسانی اطلاعات مورد استفاده توسط برنامه دارد. این اطلاعات شامل محتوای ثابت (صفحات وب، فایل‌های گرافیکی)، کد منبع برنامه، پایگاه‌های داده احراز هویت کاربر و غیره است. ابزارهای مدیریتی بسته به سایت، فناوری یا نرم‌افزار مورد استفاده متفاوت خواهند بود. به عنوان مثال، برخی از وب سرورها با استفاده از رابط های مدیریتی مدیریت می شوند که خود سرورهای وب هستند (مانند وب سرور iPlanet) یا توسط فایل های پیکربندی متن ساده (در مورد آپاچی [3]) یا از ابزارهای رابط کاربری گرافیکی سیستم عامل (هنگام استفاده از سرور IIS مایکروسافت یا ASP.Net) اداره می شود.

در بیشتر موارد، پیکربندی سرور با استفاده از ابزارهای مختلف نگهداری فایل که توسط وب سرور استفاده می‌شود، مدیریت می‌شود که از طریق سرورهای FTP، WebDAV، سیستم‌های فایل شبکه (NFS، CIFS) یا مکانیسم‌های دیگر مدیریت می‌شوند. بدیهی است که سیستم عامل عناصر تشکیل دهنده معماری اپلیکیشن نیز با استفاده از ابزارهای دیگر مدیریت خواهد شد. برنامه ها همچنین ممکن است دارای رابط های اداری تعبیه شده در آنها باشند که برای مدیریت خود داده های برنامه (کاربران، محتوا و غیره) استفاده می شود.

پس از نقشه‌برداری از رابط‌های مدیریتی مورد استفاده برای مدیریت بخش‌های مختلف معماری، بررسی آنها مهم است، زیرا اگر مهاجم به هر یک از آنها دسترسی پیدا کند، می‌تواند معماری برنامه را به خطر بیاندازد یا به آن آسیب برساند. برای انجام این کار مهم است:

- مکانیسم‌هایی را که دسترسی به این رابط‌ها و حساسیت‌های مرتبط با آن‌ها را کنترل می‌کنند، تعیین کنید. این اطلاعات ممکن است به صورت آنلاین در دسترس باشد.
- نام کاربری و رمز عبور پیش فرض را تغییر دهید.

برخی از شرکت‌ها تصمیم می‌گیرند تمام جنبه‌های برنامه‌های وب سرور خود را مدیریت نکنند، اما ممکن است طرف‌های دیگری مدیریت محتوای ارائه‌شده توسط برنامه وب داشته باشند. این شرکت خارجی ممکن است فقط بخش‌هایی از محتوا را ارائه کند (به‌روزرسانی‌های خبری یا تبلیغات) یا ممکن است سرور وب را به طور کامل مدیریت کند (از جمله محتوا و کد). یافتن واسط های اداری در دسترس از اینترنت در این شرایط معمول است، زیرا استفاده از اینترنت ارزان تر از ارائه یک خط اختصاصی است که شرکت خارجی را از طریق یک رابط مدیریتی به زیرساخت برنامه متصل می کند. در این شرایط، آزمایش اینکه آیا رابط های اداری می توانند در برابر حملات آسیب پذیر باشند، بسیار مهم است.

## منابع

- [1] WebSEAL, also known as Tivoli Authentication Manager, is a reverse proxy from IBM which is part of the Tivoli framework.
- [2] Such as Symantec's Bugtraq, ISS' X-Force, or NIST's National Vulnerability Database (NVD).
- [3] There are some GUI-based administration tools for Apache (like NetLoony) but they are not in widespread use yet.
